// @require JsScript > SchemeWebCom
(function(d){d.register("WebComScheme","SchemeWebForm",{classExtends:"WebCom",options:{form:{defaults:null,define:function(a,b,c){a.optionApply("html",c);b=b||a.dom.querySelector("form");a.formSubmitBind=a.formSubmit.bind(a);b.addEventListener("submit",a.formSubmitBind);return b},destroy:function(a){a.form.removeEventListener("submit",a.formSubmitBind)}},formId:{defaults:null,define:function(a,b,c){a.optionApply("form",c);c=this.wjs.document.createElement("input");c.setAttribute("name","formId");
c.setAttribute("type","hidden");c.value=b;a.form.appendChild(c)}}},__construct:function(){this.__super("__construct",arguments);this.initWebForm()},__destruct:function(){this.exitWebForm();this.__super("__destruct",arguments)},initWebForm:d._e,exitWebForm:d._e,formSubmit:function(a){a.preventDefault();a=0;for(var b,c=this.form.elements,d=Object.keys(c),e={};b=d[a++];)isNaN(b)&&"length"!==b&&(e[b]=c[b].value);this.submit(e)&&(this.wjs.ajax({method:"POST",data:e,url:this.wjs.settings.pathResponse+"?"+
this.loader.type+"=1",success:this.success.bind(this)}),this.sent(e))},submit:d._e,sent:d._e,success:d._e})})(WjsProto);
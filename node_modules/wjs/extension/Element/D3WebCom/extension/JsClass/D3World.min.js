// @require JsClass > ThreeCamera
(function(d){d.register("JsClass","D3World",{__construct:function(b,a,c){this.perspective=c||1E3;this.domStage=b||this.wjs.loaders.Element.stageDefault;this.domStage.dom.style.perspective=this.perspective+"px";this.domStageUpdate=this.update.bind(this);this.domStage.dom.addEventListener("playPlayerRender",this.domStageUpdate);this.child3dSort=[];this.camera=new (this.wjs.classProto("ThreeCamera"))(0,1,0);this.camera.translateZ(a||-1E3);this.camera.updateMatrix();this.update()},update:function(){this.cameraWorldPosition=
this.camera.getWorldPosition();for(var b=0,a,c=this.child3dSort.sort(this.updateSortZCompare);a=c[b++];)a.dom&&(a.dom.style.zIndex=b)},updateSortZCompare:function(b,a){return b.distanceToCamera>a.distanceToCamera?1:b.distanceToCamera<a.distanceToCamera?-1:0}})})(WjsProto);
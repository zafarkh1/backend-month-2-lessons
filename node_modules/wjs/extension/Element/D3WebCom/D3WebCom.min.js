// @require Element > Clip
// @require JsClass > ThreeObject3d
// @require JsClass > D3World
// @require JsMethod > arrayDeleteItem
(function(c){c.register("Element","D3WebCom",{classExtends:"Element\\Clip",variables:{rotateH:0,rotateP:0,rotateB:0,translateX:0,translateY:0,translateZ:0},options:{zSort:{defaults:!0,define:function(b,a,c){b.optionApply("D3World",c);a&&b.D3World.child3dSort.push(b)}},D3World:{define:function(b,a){a||(this.wjs.D3WorldGlobal||(this.wjs.D3WorldGlobal=new (this.wjs.classProto("D3World"))),a=this.wjs.D3WorldGlobal);return a},destroy:function(b,a){a&&this.wjs.arrayDeleteItem(a.child3dSort,b)}}},__construct:function(){this.object3d=
new (this.wjs.classProto("ThreeObject3d"))(0,1,0);this.__super("__construct",arguments);this.init3D()},init3D:c._e,childAdd:function(b){this.isA("D3World")?b.D3World=this:b.D3World=this.D3World;return this.__super("childAdd",[b])},renderReset:function(){var b=this.__super("renderReset"),a=this.object3d;a.position.x=a.position.y=a.position.z=a.quaternion.x=a.quaternion.y=a.quaternion.z=0;a.quaternion.w=1;a.translateX(this.translateX);a.translateY(-this.translateY);a.translateZ(-this.translateZ);a.rotateX(this.wjs.Math.degToRad(this.variableGet("rotateH")));
a.rotateY(this.wjs.Math.degToRad(this.variableGet("rotateP")));a.rotateZ(this.wjs.Math.degToRad(this.variableGet("rotateB")));return b},renderDom:function(b){this.object3d.updateMatrix();return this.__super("renderDom",arguments)},matrixToCss:function(b){return"matrix3d("+Array.prototype.slice.call(b.elements).join(",")+")"}})})(WjsProto);